# Android图形系统（二）驱动层：高刷屏给硬件工程师带来哪些挑战？

对于应用开发工程师来说，虽然我们不需要写驱动程序，但是了解View最终是如何显示到屏幕上还是非常有必要的

本篇是Android图形系列的第二篇文章，依旧是一些关于屏幕的名词解释，和Android系统本身没有太大关系，相较于第一篇文章，本篇重点在于介绍“屏幕刷新机制”相关的知识点



“屏幕刷新”涉及到许多技术名词：逐行扫描、隔行扫描、刷新率、帧率、画面撕裂、垂直同步信号、双重缓存、三重缓冲等等，单独去了解其中的某一个词可能会觉得很容易理解，但将它们组合在一起时，情况可能就会变得复杂一些

比如：

> **帧率与刷新率的区别，帧率是不是一定要和刷新率匹配，不匹配时多出来的帧率是不是浪费了？**
>
> **垂直同步信号的出现是为了解决什么问题？**
>
> **为什么电脑开启了垂直同步后感觉更卡了？**
>
> **有的应用在60HZ屏幕体验很好，反而在120HZ屏幕上却出现卡顿，为什么？**
>
> **既然刷新率越高体验越好，那厂商干嘛不直接出10000HZ的屏幕？**
>
> **高刷屏给硬件工程师带来哪些挑战？**
>
> **...**

本篇文章将会带着大家一起去寻找上述问题的答案，去探寻这些技术诞生的背后发生了哪些故事

前排提示：

> - **为了更好的理解每项技术诞生的背景，强烈建议按照文章的顺序进行阅读**
> - **文章不涉及代码，非技术人员可以放心食用**

以下，enjoy：

overview图片

## 一、开篇

手机屏幕发展至今，市场上在售手机的屏幕类型基本可以分为两种：**LCD屏和OLED屏**

其实不只是手机屏幕，**电脑**和**电视**屏幕面板基本也就这两种

早在LCD屏和OLED屏诞生之前，我们使用的显示器大多都是CRT显示器

![image_android_view_v2_crt_overview](/imgs/second/image_android_view_v2_crt_overview.gif)

*图片来源：https://gfycat.com/courageousunhealthyirishdraughthorse-computing-recycling-backlit-cathode*

如图所示，这种带着大屁股电脑就是CRT显示器，小时候家里的大屁股彩电、街机厅里面的接机也都是CRT显示器的一种

因为屏幕刷新的部分技术来源于CRT显示器，为了后续的剧情能够正常发展，在正文开始前我们需要先来了解一下这个快被遗忘的老家伙

### **显示器的鼻祖：CRT**

CRT显示器学名为“阴极射线显像管”，是一种使用阴极射线管（Cathode Ray Tube）的显示器，主要有五部分组成：电子枪、偏转线圈、荫罩、高压石墨电极和荧光粉涂层

![image_android_view_v2_crt_dismantle](/imgs/second/image_android_view_v2_crt_dismantle.jpg)

*图片来源：[《计算机图形学基础（第3版）》](https://www.amazon.cn/dp/B07R4LNRR6)*

> [多扫描线彩色crt显像管及多扫描线高清crt图像显示装置：](https://patents.google.com/patent/CN1877782A/zh)
>
> CRT(Cathode Ray Tube)阴极射线显像管是一种采用多扫描线彩色CRT显像管实现高清晰度图像显示的装置的应用技术，以及一种多扫描线彩色CRT显像管多组电子束扫描矫正的调整方法
>
> 通过对图像信号进行数字技术处理，以及多扫描线彩色CRT显像管的采用，使CRT显像管能够实现大屏幕、高亮度、高对比度、高清晰度等性能，以适应HDTV高清晰度数字电视机以及高清晰度图像显示器的技术要求
>
> 一般的CRT显示器，如：CRT电视机和CRT电脑显示器，目前使用的CRT显像管都是属于单扫描线CRT显像管
>
> CRT显像管是靠电子枪发射电子束轰击荧光粉而发光的，荧光粉发光响应速度快，色彩鲜艳，对比度高，这些优点是其它显示器难以比得及的
>
> 但CRT显像管显示器与其它平板显示器相比，也有缺点，一个是显示器的屏幕越大，屏幕发光亮度和对比度就越低，因此，目前一般CRT显像管显示器的最大屏幕尺寸很难做到32寸以上

**简单来说，CRT屏幕之所以能够显示图像，是靠电子枪发射的电子束来点亮的荧光粉实现的**

到这里，加上在图形系列的第一篇文章中介绍的LCD和OLED，我们就有三种不同类型的显示器屏幕了

CRT的显示原理刚刚解释过了，另外两种我们一起来回顾一下：

> - **LCD是液晶面板，通过控制液晶层电压就可以改变像素颜色**
> - **OLED是自发光二极管，控制单个二极管的电流就可以改变像素颜色**

关于CRT屏幕的介绍到这就结束了，接下来开始今天的正文：显示器屏幕是如何刷新的？

## 二、屏幕刷新原理

上一小节我们知道了CRT是由电子束轰击点亮荧光粉来显示图形的，而荧光粉的特性就是被点亮后很快就会熄灭了，所以电子枪需要一刻不停的扫描

那CRT屏幕刷新原理就显而易见了：电子枪快速扫描

### CRT刷新机制：快速扫描

电子枪使用的扫描方式有很多，比如直线式扫描，圆形扫描，螺旋扫描等等，我们今天要介绍的是直线式扫描中的“逐行扫描”和“隔行扫描”

- **逐行扫描**

> 逐行扫描是最原始的扫描方式，电视机诞生之初使用的就是逐行扫描
>
> 逐行扫描的意思很简单：在一块CRT的屏幕上，电子枪按照从左到右、从上到下的顺序移动发射电子束的方式就叫做逐行扫描

- **隔行扫描**

> 隔行扫描是在逐行扫描的基础上修改的，扫描的顺序依旧是从左到右、从上到下，只是把原来一行行向下扫描改成了隔一行扫描一行

![image_android_view_v2_crt_scan](/imgs/second/image_android_view_v2_crt_scan.gif)

如图所示，隔行扫描第一次会先扫描奇数行，第二次会扫描偶数行，两次扫描结束后才是一幅完整的图形

隔行扫描和上面介绍的的逐行扫描的得到的视频相比，图像的清晰度会稍差，并且还会伴有轻微的闪烁

**可能有同学要问：既然隔行扫描的质量不如逐行扫描，那为什么还要发明它呢？答：因为市场有需求**

- **隔行扫描的诞生背景**

> 早期的广播电视播放内容比较单一，大部分是文字广告和音乐之类的内容，电影还是使用“电影放映机”来播放的
>
> 电视机发明后，人们想把电影节目也搬到电视节目当中，但是当时的广播电视传输带宽不够，所以人们就想了个办法：将一幅画面的数据按照奇偶数拆成两场，其中奇数行称为上场，偶数行称为下场，分成两次传输
>
> 电视机每次接收到的也是半幅画面，在PAL制式和NTSC制式中，显示器接受到数据后会先显示奇数行，再显示偶数行，两次显示后凑成一幅完整的图像
>
> 再后来，DVD被发明出来，相当于电视机播放的是本地视频，广播传输的带宽不再是瓶颈，所以后来的CRT电视机逐行和隔行都支持，我们小的时候看的大屁股电视，只要带有DVD接口的都是可以兼容两种不同的扫描方式的



### LCD：大人 时代变了

时间来到了1968年，第一块LCD液晶屏横空出世了

经过了36年的发展，在2004年年末爆发了液晶电视革命，LCD液晶屏幕在亮度、色域、可视角度等各种参数上都完虐老大哥CRT；和液晶屏幕比，CRT屏幕除了在刷新率上有优势外，其他方面都是弟弟

于是乎从2005年开始，夏普、松下、三菱等各大屏幕厂商都陆续宣布停产CRT显示器

2012年，随着最后一家CRT显示器厂家**彩虹电子**宣布停产，CRT时代彻底宣告落幕

..

扯远了，说回液晶屏刷新的事儿

- **驱动原理：有源驱动**

> 首先我们得知道，LCD液晶屏和OLED屏的背后都是有电路板的，那想要控制每个像素点发光显示，就需要有驱动电路
>
> 驱动又分为两种，一种是无源驱动，我个人的理解是在N*N的像素矩阵由水平垂直两根线来驱动，点亮像素只需要找到它在XY的坐标轴即可，缺点是不能持续的给每个像素通电，只能通过高频的点亮/熄灭像素来维持画面，和之前介绍的PWM调光原理类似
>
> 另一种叫有源驱动，TFT-LCD和OLED阵营的AMOLED屏都是属于有源驱动的方式，有源驱动简单来说是在每个像素点后面加入可以单独控制发光的开关，这样每个像素点就可以单独控制了，这样做的好处也显而易见，每个像素都可以持续发光
>
> 我在网上没有查到无源驱动和有源驱动各自的市场占用率，我们常见的LCD液晶屏中的TFT-LCD屏，和OLED屏的AMOLED都是使用有源驱动的方式，所以接下来关于屏幕刷新的所有都是建立在有源驱动之上，也叫有源矩阵

- **LCD液晶屏刷新原理**

> 前面介绍了LCD屏幕的大多使用有源驱动的方式，因为有电路板的原因，使得屏幕上每个像素点都可以直接寻址，无需等待电子光束到来才能更新
>
> 那是不是可以理解成LCD不需要逐行扫描技术了呢？
>
> 答案是：NO
>
> 虽然LCD屏幕可以直接寻址来更新像素点，但随着屏幕分辨率越来越高，一次性更新所有像素点的代价也变得越高
>
> 我们来看一下屏幕驱动从显存读取数据并显示到屏幕这个过程
>
> ![image_android_view_v2_lcd_ddram](/Users/bob/Desktop/Bob/work/workspace/androidstudio/Blackboard/Blog/src/main/java/com/android/blog/android_view/imgs/second/image_android_view_v2_lcd_ddram.png)
>
> *图片来源：[《理解 LCD 屏幕的驱动原理与调试过程》](https://www.cnblogs.com/juwan/p/13069102.html)*
>
> 看上图，我们重点关注“显示内存（DDRAM）”这个词儿，后续简称显存
>
> Line Address Counter（简称LAC）从显存读取数据一行或多行显示到屏幕上，而显存也是GPU直接访问的内存，通常交由ION系统来管理
>
> 关于ION系统可以看魅族内核团队写的一篇文章：[《内存管理 —— ION》](https://kernel.meizu.com/memory%20management%20-%20ion.html)
>
> 到这里，我们就可以得出初步的结论了，GPU渲染完一帧数据后写入显存，屏幕驱动中LAC一行或多行读取显存中的数据来更新像素点，我们常在各个评测文章同听到LCD屏幕上的的逐行扫描，通常就是这个意思
>
> *需要了解更多关于LCD驱动原理的知识可以看博客园这个大佬的文章：[《理解 LCD 屏幕的驱动原理与调试过程》](https://www.cnblogs.com/juwan/p/13069102.html)*



### OLED：都是弟弟

OLED的显示原理虽然比LCD液晶屏要先进一些，但是在刷新方式上和LCD基本上相同，参考上一章的LCD液晶屏刷新原理就可以了

有区别的一点是OLED可以利用PWM调光来刷新像素，什么意思呢？

在《文章一》解释了PWM调光是有频率的，我手里的Pixel 3调光频率是245HZ，245HZ显然比普通的60HZ屏幕刷新率要高，那么我就可以利用PWM调光重新点亮屏幕的瞬间来顺便刷新像素颜色，那么就导致OLED有两种刷新策略

- 显示高优先级内容，比如动画

> 参考LCD屏幕刷新，LAC读显存里面的framebuffer，更新像素

- 显示低优先级内容，比如更改文字、背景

> 利用PWM调光频率大于刷新率的特点，等待PWM调光重新点亮屏幕的瞬间来更新像素颜色
>
> 图片
>
> 程序中运行的是自定义VIEW不停来回在红色和蓝色之间切换，我们可以看到PWM调光深度的那条横线走到哪，哪里的像素点就会发生变化；程序代码我放在github仓库了，感兴趣的同学可以下载下来在自己的手机上运行试试看



### 小结：如何才能看到屏幕刷新的过程？

讲了这么多，能不能观察到屏幕刷新的过程呢？

人眼不可以，但高速摄像机可以！

YouTube上有个专门拍摄慢动作的团队：[The Slow Mo Guys](https://www.youtube.com/user/theslowmoguys)

他们在2018年发布一个叫《[How a TV Works in Slow Motion - The Slow Mo Guys](https://www.youtube.com/watch?v=3BJU2drrtCM)》的视频（B站中文搬运点[这里](https://www.bilibili.com/video/BV11W411H7Bo)），视频内容就是介绍不同屏幕类型的电视在高速摄像机里是什么样子的，我截几张图大家感受一下：

![image_android_view_v2_slow_crt](/Users/bob/Desktop/Bob/work/workspace/androidstudio/Blackboard/Blog/src/main/java/com/android/blog/android_view/imgs/second/image_android_view_v2_slow_crt.gif)

CRT的逐行刷新，从动图里就能很明显的看到扫描枪的扫描线按照从左到右，从上到下的顺序扫描更新

![image_android_view_v2_slow_lcd_tv](/Users/bob/Desktop/Bob/work/workspace/androidstudio/Blackboard/Blog/src/main/java/com/android/blog/android_view/imgs/second/image_android_view_v2_slow_lcd_tv.gif)

LCD液晶电视的截图，动图里看起来像是整副画面一起更新，实际上我用PR放慢来看是多行像素一起更新

![image_android_view_v2_slow_lcd_phone](/Users/bob/Desktop/Bob/work/workspace/androidstudio/Blackboard/Blog/src/main/java/com/android/blog/android_view/imgs/second/image_android_view_v2_slow_lcd_phone.gif)

动图里是使用LCD液晶屏的iPhone 7手机，原视频太小了看起来很模糊，不过依稀还是可以看到屏幕是一行行像素刷新的

## 三、刷新率和帧率

了解了几种不同类型屏幕的刷新原理，刷新率其实就很好理解了：单位时间内屏幕刷新的次数，就是屏幕刷新率，表示单位为HZ

比如常见的60HZ屏幕意思就是1s内屏幕会刷新60次

刷新率本身很好理解，但不是我们讨论的重点，本章节打算讨论另外两个有趣的问题：

1. 刷新率的高低取决于什么？
2. 手机屏幕的刷新率能不能修改？

### **刷新率的高低取决于什么？**

现在的手机屏幕和电脑显示器的刷新率都越来越高，90HZ、120HZ、144HZ等等

在使用这些高刷显示设备时，u1s1，体验是真的会好很多

既然120HZ设备相较于60HZ的设备体验会上一个台阶，那厂家为啥不把刷新率拉满呢？直接干到10000HZ行不行？是差钱啊还是差事？

**是什么决定了刷新率的上限？**

CRT、LCD、OLED这几种类型的屏幕因为刷新原理的不同，所以要分开说

- 首先是CRT显示器：

> 对于CRT显示器来说，电子枪按照从左到右、从上而下的顺序进行扫描，在扫描完整个屏幕后为一次刷新
>
> 那么在一秒钟内电子枪移动的速度极限就是CRT显示器的刷新率上限

- 然后是LCD液晶屏：

> 对于LCD屏幕来说，刷新率的上限取决于屏幕的灰阶响应时间
>
> 灰阶响应时间这个词在之前没出现过，解释一下：灰阶响应时间指的是像素点从除了黑白之外的颜色变化到另一种颜色所需要的时间
>
> 由于液晶屏的特性，在低温环境下屏幕响应时间会变长，所以哪怕只有60HZ的屏幕在冬天也很容易出现拖影的现象

- 最后是OLED屏幕：

> 对于OLED屏幕来说，刷新率的上限和LCD类似，都是取决于屏幕灰阶响应时间
>
> 不过由于OLED没有液晶层，所以上限相对LCD会更高一些

总结一下，老式的大屁股刷新率取决于内部的电子枪移动速度，LCD和OLED取决于屏幕本身的素质

### 如何更改手机屏幕的刷新率？

手机屏幕基本上只有LCD和OLED类型，既然LCD/OLED的刷新率取决于屏幕素质，那手机的刷新率能不能像CPU一样超频使用呢？

答案是可以的

比如我手里Pixel 3就被我超频到61HZ了，原先是60HZ

图片

超频的方式多种多样，比如我的手机是使用酷安大佬制作的[“RR屏幕刷新率”](https://www.coolapk.com/apk/com.rise.rr)修改的，小米部分机型可以root后刷文件来修改，三星s20更加粗暴，直接通过adb命令就可以修改掉刷新率

为什么能够超频的原因我暂时还不清楚，想要超频自己手机的小伙伴一定要先去[论坛](https://www.akr-developers.com/?q=%E8%B6%85%E9%A2%91)找一下有没有成功的先例

随意超频可能会出现点击偏移、显示卡顿、LCD可能会出现残影等待现象，非常不建议折腾自己的主力机

### 什么是帧率？

聊完了刷新率我们接着说帧率（Frame Rate）

我们平时打游戏时除了关注网络延迟外，通常还会关注FPS这个指标，FPS越高游戏画面越流畅，那到底什么是帧率？

![image_android_view_v2_15_30_60fps](/Users/bob/Desktop/Bob/work/workspace/androidstudio/Blackboard/Blog/src/main/java/com/android/blog/android_view/imgs/second/image_android_view_v2_15_30_60fps.gif)



要解释这个问题，我们需要了解下胶卷时代的电影放映机是如何播放影片的

image_android_view_v2_fps_movie.gif

24帧的电影帧率标准是从有声电影诞生后制定的，电影放映机的胶片以每秒456毫米8.0英寸的速度（也就是24 fps）穿过投影机，最终投射到幕布上，这就是帧率，简单来说就是源文件的速率

有的同学可能要问了：你说的不对，视频在制作的时候帧率就固定了，计算机的画面都是实时渲染的，跟播放视频是两回事啊？

对的，由于视频在制作的时候的帧率就已经固定好了，简单来说就是源文件的速率

关于帧率还有个经典的问题，为什么24帧的电影

为了方便理解，我把源文件分为两种：

- 静态源文件

> 我们在使用DVD、光盘机等设备播放本地视频时，比如蓝光机、光盘机、DVD时假设I/O的速度和
>
> 此时不考虑设备接口、芯片性能等因素，假设传输的速度和硬件解码性能都是足够的

- 动态源文件

> 我们在使用计算机时（智能手机也是计算机），不管是办公还是打游戏，对于显示器来说，我们的源文件就是显卡实时渲染的画面
>
> *PS：网上没有静态源文件/动态源文件这样的说法，为了方便理解我自己臆想出来的，用静/动态来描述我个人感觉更直观一些，觉得表达有误的可以自己重新想个词儿，理解意思就好*

最后，由于静态源文件（也就是视频）在制作的时候就帧率就已经确定下来了，是一个固定值，所以我们平时在讨论帧率时，大多数情况下讨论的都是动态源文件，也就是由CPU/GPU实时渲染出来的画面

## 四、画面撕裂和VSync信号

刷新率和帧率其中的任何一个单拎出来都很好理解，但是将它俩组合在一起时，情况就会变的更加复杂一些，比如：

> **1、电影通常都是24帧，那它是怎么在我的60HZ的显示器上播放的？同理，在90/120/144HZ是如何播放的？**
>
> **2、我的手机摄像很牛逼，能支持最高120帧录制视频，但是手机的屏幕很拉胯，刷新率只有60HZ，用手机录下来的120FPS视频在60HZ的屏幕上回放时，看到的是120帧还是60帧？**
>
> **3、刚给电脑配了一台刷新率为144HZ的显示器，但是游戏的平均帧率只有30FPS，刷新率和帧率不匹配时显示器会如何处理？**
>
> **4、显卡每秒能生成250帧画面，但是显示器只有90HZ，多出来的160帧画面是不是丢弃了？如果是丢弃了如果是丢弃了岂不是浪费了显卡性能？**

一次性讲清楚这几个问题比较困难，我们需要把它们分开处理

**先是问题1和问题2，它俩的共性是都是视频播放，可以放到静态源文件一栏**

**问题3和问题4对应的是实时渲染画面问题，分到动态源文件里去**

我们还可以从帧率和刷新率的角度拆分，可以分成刷新率大于帧率和帧率大于刷新率的情况

把这几种情况组合总结成下面的表格（*未开启垂直同步和多重缓冲等技术*）：

- **静态源文件**

> **Q1：电影通常都是24帧，那它是怎么在我的60HZ的显示器上播放的？同理，在90/120/144HZ是如何播放的？**
>
> 对应的是：刷新率大于帧率
>
> 显示器和视频播放器它俩其实是各忙各的，显示器只管闷头读数据，视屏播放器只管调用CPU或者GPU解码视频，然后写入到缓冲区
>
> 如果帧率和刷新率是倍数关系，比如144HZ屏幕播放24帧电影，不考虑传输贷款和解码性能的情况下，每一帧展示的次数是144 / 24 = 6次，你眼中看到的还是24副画面，只不过每一帧被重复刷新了6次而已
>
> 如果不是倍数关系，以24帧电影在60HZ的屏幕上播放举例，每一帧重复显示的次数可能是2次也可能是3次，原因看图：
>
> ![image_android_view_v2_24_movie_60_screen](/Users/bob/Desktop/Bob/work/workspace/androidstudio/Blackboard/Blog/src/main/java/com/android/blog/android_view/imgs/second/image_android_view_v2_24_movie_60_screen.jpg)
>
> *图片来源：自己画的*
>
> 屏幕会以固定的16.67ms去刷新屏幕，也就是去缓冲区读数据，不管这个数据是不是和上次的一样
>
> 如果播放器用的是FFmpeg，那在调用av_read_frame()方法读帧数据的间隔就是在41ms左右，接着调用解码器，解析完成后丢到缓冲区，什么时候读数据那是显示器的事

> **Q2：我的手机摄像很牛逼，能支持最高120帧录制视频，但是手机的屏幕很拉胯，刷新率只有60HZ，用手机录下来的120FPS视频在60HZ的屏幕上回放时，看到的是120帧还是60帧？**
>
> 对应的是：帧率大于刷新率
>
> 和Q1的情况刚好相反，在刷新率不足的情况下，原本120帧的视频被拉齐到60帧，剩下的60帧会被抛弃
>
> ![image_android_view_v2_120_movie_60_screen](/Users/bob/Desktop/Bob/work/workspace/androidstudio/Blackboard/Blog/src/main/java/com/android/blog/android_view/imgs/second/image_android_view_v2_120_movie_60_screen.jpg)
>
> *图片来源：自己画的*

**综上，在静态源文件的情况下，不管是显示器的刷新率大于视频的帧率，还是视频帧率大于显示器的刷新率，最终我们看到的画面帧率 = min(刷新率，帧率)。所以，对于看视频来说，买不买高刷屏的意义不大**

- **动态源文件**

> **Q3：刚给电脑配了一台刷新率为144HZ的显示器，但是游戏的平均帧率只有30FPS，刷新率和帧率不匹配时显示器会如何处理？**
>
> 对应的是：刷新率大于帧率
>
> 动态源文件和播放视频最大的区别就是帧率是不固定的，以打游戏举例，不同的游戏场景对应的复杂程度也不同，这就会导致在有限的硬件性能下，产出的帧率是波动的，如下图
>
> ![image_android_view_v2_144_screen_dynamic_game](/Users/bob/Desktop/Bob/work/workspace/androidstudio/Blackboard/Blog/src/main/java/com/android/blog/android_view/imgs/second/image_android_view_v2_144_screen_dynamic_game.jpg)
>
> *图片来源：自己画的*
>
> 我们要知道，游戏画面和电影视频最大的不同是没有曝光时间，灭有曝光时间也就意味着画面没有动态模糊，没有动态模糊大脑就无法想象接下来的运动方向，所以，一旦画面运动幅度过大，而帧率有跟不上，我们的直观感受就是：卡
>
> 我们这一小节的问题是刷新率和帧率不匹配时显示器会如何处理？其实答案在上面已经提过了：显示器不做任何处理，它就是台没得感情的机器，以固定速度从缓冲区读数据然后刷新像素颜色

> **Q4：显卡每秒能生成250帧画面，但是显示器只有90HZ，多出来的160帧画面是不是丢弃了？如果是丢弃了岂不是浪费了显卡性能？**
>
> 对应的是：帧率大于刷新率
>
> ![image_android_view_v2_90_screen_250_game](/Users/bob/Desktop/Bob/work/workspace/androidstudio/Blackboard/Blog/src/main/java/com/android/blog/android_view/imgs/second/image_android_view_v2_90_screen_250_game.jpg)
>
> *图片来源：自己画的*
>
> 参考Q2，这一小节的答案是：多出来的画面是会被丢弃，因为压根没有显示的机会，至于是不是白白浪费了显卡性能，我觉得至少对于游戏来说，显卡能力显著大于显示器刷新率是有好处的，尤其是FPS游戏
>
> 因为屏幕刷新时拿到的总是最新时刻的画面帧，最新帧同时会包含你的键盘和鼠标的处理事件，反映在游戏画面上就是你会觉得鼠标更跟手了

### 什么是画面撕裂？

我们在回答开篇的几个问题时，已经简单

###画面撕裂的终结者：VSync信号 

### VSync带来了新的问题

### 不用VSync和三重缓冲也能解决画面撕裂？



## 五、结语

按照顺序再总结一遍，

显示器是如何工作的

回到我们的标题



最后，为了写本篇文章我查了非常多的资料，其中有一些我觉得还不错的内容分享给大家，希望能够帮助到你

- **关于视频帧率，推荐影视飓风团队在B站的视频：[【硬核科普】奇妙的帧率增加了！](https://www.bilibili.com/video/BV1kE411c7yZ)**

- **关于显示器刷新率，推荐The Slow Mo Guys团队在YouTube上的视频：[《How a TV Works in Slow Motion？》](https://www.youtube.com/watch?v=3BJU2drrtCM)**

  > 没法科学上网的小伙伴可以去B栈看搬运视频：[【科普】显示屏是如何工作的？](https://www.bilibili.com/video/BV11W411H7Bo)

- **关于垂直同步信号，推荐硬件茶谈在B站的视频：[【硬件科普】全网最详细易懂的G-sync Freesync 垂直同步工作原理科普](https://www.bilibili.com/video/BV1FK4y1x7bk)**

  > 视频制作的还是挺不错的，但有几处比较明显的错误，比如LCD液晶屏上的逐行刷新起码是一次更新一行像素，而不是和CRT的逐行刷新类似
  >
  > 所以大家看完视频后一定要记得看评论修正偏差，尤其是ID叫做[xman12346](https://space.bilibili.com/272833187)大佬的发言，一定要看

- **关于iOS高刷屏的优化，推荐字节跳动团队在掘金发布的文章：[《iOS 高刷屏监控 + 优化：从理论到实践全面解析》](https://juejin.cn/post/7074759817738321956)**

- **关于Android高刷原理，推荐Google Android团队在掘金发布的文章：[在 Android 上进行高刷新率渲染](https://juejin.cn/post/6844904163579527181)**

  > Google Android团队日常除了会维护掘金平台外，在微信公众号上也有账号，而且更新频率很高，Android开发者可以去关注一波，了解官方团队最近都在干啥

- **关于Flutter在高刷屏上的应用，推荐恋猫de小郭在掘金发布的文章：[《Flutter 120hz 高刷新率在 Android 和 iOS 上的调研总结》](https://juejin.cn/post/7081273509690736653)**



**全文完**



## 六、参考资料

- [《计算机图形学基础（第3版）》-陆枫, 何云峰 ](https://www.amazon.cn/dp/B07R4LNRR6)
- [《多扫描线彩色crt显像管及多扫描线高清crt图像显示装置》](https://patents.google.com/patent/CN1877782A/zh)
- [《iOS 高刷屏监控 + 优化：从理论到实践全面解析》](https://juejin.cn/post/7074759817738321956)



















