### 一、启动优化

1. **将启动页主题背景设置成闪屏页图片**

   这么做的目的主要是为了消除启动时的黑白屏，给用户一种秒响应的感觉，但是并不会真正减少用户启动时间，仅属于视觉优化。

2. **主页面布局优化**
   1. 通过减少冗余或者嵌套布局来降低视图层次结构，例如使用约束*布局*ConstraintLayout或者相对布局 RelativeLayout
   2. 用 ViewStub 替代在启动过程中不需要显示的 UI 控件，例如启动页的图片控件懒加载

3. **Application 和 主 Activity 的 onCreate 中异步初始化某些代码**

   因为在主线程上进行资源初始化会降低启动速度，所以可以将不必要的资源初始化延迟，达到优化的效果。但是这里要注意懒加载集中化的问题，别用户启动时间快了，但是无法在界面上操作就尴尬了。

##### 其他方式

1. systrace

   如果想要看到自己方法的耗时，

   那需要手动在方法入口加上 Trace.beginSection("TAG")

   在方法结束的地方加上 Trace.endSection()

2. redex 

   是 Facebook 开源的一款字节码优化工具，目前只支持 mac 和 linux。

   大概原理是拿到dex解析并重新打包

3. Interdex

   腾讯bugly基于redex的方案，在打包前就确定了分包逻辑

4. 支付宝：通过安装包重排布优化 Android 端启动性能

上述2、3、4方案都是解决IO性能

### 二、包体积优化

使用Lottie和属性动画来代替帧动画

### 三、网络优化

### 四、内存优化

##### 编码习惯

1. 使用合适的数据结构
2. 禁止递归，多用循环
3. 使用注解来替换枚举

#####OOM

1. 尽量少使用多进程

##### 内存泄漏引发方式

- 匿名共享内存MemoryFile忘记close

#### 问题分析

- 你做过哪些优化方面的事情？
  - 启动优化：
    1. 在splash广告页activity上配置相同颜色的theme
    2. 懒加载：所有的本地保存的配置/三方工具，能用dlc单例用单例
    3. IdleHandler：MessageQueue为空或者是延迟消息，执行mIdleHandlers数组中IdleHandler的queueIdle方法，返回false时，将其从数组中移除，H5下载的资源，版本检测升级等
  - 布局优化：
    1. 精简XML，使用ViewStub来做延迟加载，调用inflate()或者setVisibility来显示
    2. 减少层级
  - 内存优化
    1. 低内存监听，删除glide所有的内存缓存，删除H5内存资源，发送本地广播，让持有的后端json数据清除，首页数据十几K数据，下次重新拉
  - 良好的代码规范和定期review
    1. register和unRegister必须成对出现
    2. 除必要情况，比如用户的数据，登录情况，H5资源数据等不允许使用静态变量保存大数据
    3. 减少enum的使用，使用IntDef和StringDef代替
  - 网络优化
    1. 连接复用，在首页类目和分类的请求中
  - 包体积优化
    1. 过滤相同大小图片资源
    2. 过滤/合并第三方相同的库
    3. 开启混淆
    4. 使用armabi-v7a